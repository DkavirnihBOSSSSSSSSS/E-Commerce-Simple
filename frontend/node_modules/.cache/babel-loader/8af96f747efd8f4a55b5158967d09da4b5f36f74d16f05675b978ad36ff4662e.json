{"ast":null,"code":"var _jsxFileName = \"C:\\\\Tugas\\\\Semester 5\\\\E-Commerce-react-node-mysql-main\\\\client\\\\src\\\\components\\\\Login\\\\Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport \"./Login.scss\";\nimport { getBaseURL } from \"../apiConfig\";\nimport TokenRefresher from \"../Utils/token\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Login(props) {\n  _s();\n  let [uname, setUname] = useState(\"\");\n  let [password, setPass] = useState(\"\");\n  let [error, setError] = useState(\"\");\n\n  // Adding click handler\n  function handleClick() {\n    if (validateInputs()) {\n      const user = {\n        email: uname,\n        password: password\n      };\n      let url = `${getBaseURL()}api/users/login`;\n      axios.post(url, {\n        ...user\n      }).then(res => {\n        console.log(res);\n        if (res.data.length > 0) {\n          console.log(\"Logged in successfully\");\n          sessionStorage.setItem(\"isUserAuthenticated\", true);\n          const user = res.data[0].isAdmin;\n          sessionStorage.setItem(\"customerId\", res.data[0].userId);\n          sessionStorage.setItem(\"isAdmin\", user ? true : false);\n          sessionStorage.setItem(\"jwt_token\", res.data[0].token);\n          sessionStorage.setItem(\"jwt_refresh_token\", res.data[0].refreshToken);\n          TokenRefresher(res.data[0].refreshToken);\n          props.setUserAuthenticatedStatus(user ? true : false, res.data[0].userId);\n        } else {\n          console.log(\"User not available\");\n        }\n      }).catch(err => {\n        console.log(err);\n        console.log(\"error\");\n      });\n    }\n  }\n\n  // Function to validate email format\n  function validateEmail(email) {\n    const regex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return regex.test(email);\n  }\n\n  // Function to validate password length\n  function validatePassword(password) {\n    return password.length >= 6;\n  }\n\n  // Function to validate inputs\n  function validateInputs() {\n    if (!validateEmail(uname)) {\n      setError(\"Please provide a valid email address.\");\n      return false;\n    } else if (!validatePassword(password)) {\n      setError(\"Password must be at least 6 characters long.\");\n      return false;\n    }\n    setError(\"\");\n    return true;\n  }\n\n  // Function to handle changes in email input\n  function changeName(event) {\n    setUname(event.target.value);\n  }\n\n  // Function to handle changes in password input\n  function changePass(event) {\n    setPass(event.target.value);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"E-Mail\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: uname,\n          onChange: changeName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: password,\n          onChange: changePass\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleClick,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"register-link\",\n        onClick: () => props.navigateToRegisterPage(),\n        children: \"Is New User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(Login, \"5pVqVy6uKlH9GlR998Sqn9MRULI=\");\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","axios","getBaseURL","TokenRefresher","jsxDEV","_jsxDEV","Fragment","_Fragment","Login","props","_s","uname","setUname","password","setPass","error","setError","handleClick","validateInputs","user","email","url","post","then","res","console","log","data","length","sessionStorage","setItem","isAdmin","userId","token","refreshToken","setUserAuthenticatedStatus","catch","err","validateEmail","regex","test","validatePassword","changeName","event","target","value","changePass","children","className","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","onClick","navigateToRegisterPage","_c","$RefreshReg$"],"sources":["C:/Tugas/Semester 5/E-Commerce-react-node-mysql-main/client/src/components/Login/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport \"./Login.scss\";\nimport { getBaseURL } from \"../apiConfig\";\nimport TokenRefresher from \"../Utils/token\"; \n\nfunction Login(props) {\n  let [uname, setUname] = useState(\"\");\n  let [password, setPass] = useState(\"\");\n  let [error, setError] = useState(\"\");\n\n  // Adding click handler\n  function handleClick() {\n    if (validateInputs()) {\n      const user = {\n        email: uname,\n        password: password,\n      };\n      let url = `${getBaseURL()}api/users/login`;\n      axios\n        .post(url, { ...user })\n        .then((res) => {\n          console.log(res);\n          if (res.data.length > 0) {\n            console.log(\"Logged in successfully\");\n            sessionStorage.setItem(\"isUserAuthenticated\", true);\n            const user = res.data[0].isAdmin;\n            sessionStorage.setItem(\"customerId\", res.data[0].userId);\n            sessionStorage.setItem(\"isAdmin\", user ? true : false);\n            sessionStorage.setItem(\"jwt_token\", res.data[0].token);\n            sessionStorage.setItem(\"jwt_refresh_token\", res.data[0].refreshToken);\n            TokenRefresher(res.data[0].refreshToken);\n            props.setUserAuthenticatedStatus(user ? true : false, res.data[0].userId);\n          } else {\n            console.log(\"User not available\");\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          console.log(\"error\");\n        });\n    }\n  }\n\n  // Function to validate email format\n  function validateEmail(email) {\n    const regex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return regex.test(email);\n  }\n\n  // Function to validate password length\n  function validatePassword(password) {\n    return password.length >= 6;\n  }\n\n  // Function to validate inputs\n  function validateInputs() {\n    if (!validateEmail(uname)) {\n      setError(\"Please provide a valid email address.\");\n      return false;\n    } else if (!validatePassword(password)) {\n      setError(\"Password must be at least 6 characters long.\");\n      return false;\n    }\n    setError(\"\");\n    return true;\n  }\n\n  // Function to handle changes in email input\n  function changeName(event) {\n    setUname(event.target.value);\n  }\n\n  // Function to handle changes in password input\n  function changePass(event) {\n    setPass(event.target.value);\n  }\n\n  return (\n    <>\n      <div className=\"login-container\">\n        <h1>Login</h1>\n        <div>\n          <label>E-Mail</label>\n          <input type=\"text\" value={uname} onChange={changeName}></input>\n        </div>\n        <div>\n          <label>Password</label>\n          <input\n            type=\"password\"\n            value={password}\n            onChange={changePass}\n          ></input>\n        </div>\n        {error && <div className=\"error-message\">{error}</div>}\n        <button onClick={handleClick}>Login</button>\n        <div className=\"register-link\" onClick={() => props.navigateToRegisterPage()}>\n          Is New User\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}